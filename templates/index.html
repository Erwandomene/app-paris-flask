<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Suivi de Paris Sportifs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
    <h1 class="mb-4 text-center">Suivi de Paris Sportifs</h1>

    <!-- STATISTIQUES -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">Statistiques</div>
        <div class="card-body">
            <p><strong>Nombre total de paris :</strong> {{ stats.total }}</p>
            <p><strong>Taux de r√©ussite :</strong> {{ stats.taux_reussite }}%</p>
            <p><strong>Mises totales :</strong> {{ stats.mise_totale }} ‚Ç¨</p>
            <p><strong>Gains totaux :</strong> {{ stats.gain_total }} ‚Ç¨</p>
            <p><strong>Profit net :</strong> {{ stats.profit }} ‚Ç¨</p>
        </div>
    </div>

    <!-- FORMULAIRE -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">Ajouter un pari</div>
        <div class="card-body">
            <form method="POST" action="/ajouter">
                <div class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">Date</label>
                        <input type="date" name="date" class="form-control" required>
                    </div>
                    <div class="col-md-8">
                        <label class="form-label">Match</label>
                        <input type="text" name="match" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Comp√©tition</label>
                        <input type="text" name="competition" class="form-control">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Sport</label>
                        <select id="sport" name="sport" class="form-select" required>
                            <option value="">-- Choisir un sport --</option>
                            <option value="Football">Football</option>
                            <option value="Tennis">Tennis</option>
                            <option value="Ping-pong">Ping-pong</option>
                            <option value="Cyclisme">Cyclisme</option>
                            <option value="Badminton">Badminton</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Type de pari</label>
                        <select id="type_pari" name="type_pari" class="form-select" required>
                            <option value="">-- S√©lectionnez un sport d'abord --</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Cote</label>
                        <input type="number" step="0.01" name="cote" class="form-control" required>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Mise ‚Ç¨</label>
                        <input type="number" step="0.01" name="mise" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Bookmaker</label>
                        <input type="text" name="bookmaker" class="form-control">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">R√©sultat</label>
                        <select name="resultat" class="form-select">
                            <option>Gagn√©</option>
                            <option>Perdu</option>
                            <option>Annul√©</option>
                            <option>En cours</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Commentaire</label>
                        <input type="text" name="commentaire" class="form-control">
                    </div>
                </div>
                <button type="submit" class="btn btn-success mt-3">Ajouter</button>
            </form>
        </div>
    </div>

    <!-- TABLE HISTORIQUE -->
    <div class="card">
        <div class="card-header bg-secondary text-white">Historique des paris</div>
        <div class="card-body">
            <table class="table table-bordered table-hover">
                <thead class="table-light">
                    <tr>
                        <th>Date</th><th>Match</th><th>Type</th><th>Cote</th><th>Mise</th><th>R√©sultat</th><th>Gains</th><th>Action</th>
                    </tr>
                </thead>
                <tbody>
                {% for pari in paris %}
                    <tr>
                        <td>{{ pari.date }}</td>
                        <td>{{ pari.match }}</td>
                        <td>{{ pari.type }}</td>
                        <td>{{ pari.cote }}</td>
                        <td>{{ pari.mise }}</td>
                        <td>{{ pari.resultat }}</td>
                        <td>{{ pari.gain }}</td>
                        <td>
                            <a href="/modifier/{{ pari.id }}" class="btn btn-sm btn-warning">‚úèÔ∏è Modifier</a>
                            <a href="/supprimer/{{ pari.id }}" class="btn btn-sm btn-danger" onclick="return confirm('Supprimer ce pari ?')">üóëÔ∏è</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- SCRIPT DE MISE √Ä JOUR DU TYPE DE PARI -->
<script>
    const typesParSport = {
        "Football": ["1N2", "Score exact", "Buteur", "Over/Under", "Double chance"],
        "Tennis": ["Vainqueur match", "Set pr√©cis", "Nombre de sets", "Nombre de jeux"],
        "Ping-pong": ["Vainqueur match", "Nombre de sets", "Score exact"],
        "Cyclisme": ["Vainqueur √©tape", "Top 3", "Top 10", "Duel coureurs"],
        "Badminton": ["Vainqueur match", "Nombre de sets", "Score exact"]
    };

    document.getElementById("sport").addEventListener("change", function () {
        const sport = this.value;
        const select = document.getElementById("type_pari");
        select.innerHTML = "";
        if (typesParSport[sport]) {
            typesParSport[sport].forEach(function (type) {
                const option = document.createElement("option");
                option.value = type;
                option.textContent = type;
                select.appendChild(option);
            });
        } else {
            const option = document.createElement("option");
            option.value = "";
            option.textContent = "-- S√©lectionnez un sport d'abord --";
            select.appendChild(option);
        }
    });
</script>
</body>
</html>
